# 現状のアプリのセキュリティ対策状況と初学者向け解説

このドキュメントでは、「paid-leave-manager」アプリがどのようなセキュリティ対策を実装しているかを解説します。初学者の方にも分かりやすいよう、用語や仕組みも丁寧に説明します。

---

## フロントエンド（React）

### XSS（クロスサイトスクリプティング）対策

- React では、JSX 内で値を表示する場合は自動的に HTML エスケープ（無害化）されるため、通常の使い方であれば XSS 攻撃を防げます。
- 本アプリでは、危険な HTML 描画（dangerouslySetInnerHTML や innerHTML）は現状使われていません。
- もし今後、外部データを HTML として描画する場合は、`DOMPurify`というライブラリでサニタイズ（安全化）することが推奨されます。

#### 【初学者向け解説】

XSS とは、悪意のあるスクリプト（JavaScript など）が Web ページに埋め込まれ、他のユーザーのブラウザで実行されてしまう攻撃です。React は通常の使い方なら自動で防いでくれますが、HTML を直接描画する場合は注意が必要です。

---

## バックエンド（Laravel）

### SQL インジェクション対策

- 本アプリでは、データベース操作に Eloquent ORM やクエリビルダを利用しており、これらは自動的に値をエスケープして安全に SQL を発行します。
- 生 SQL（DB::raw や直接 SQL 文を書く方法）は使われていません。

#### 【初学者向け解説】

SQL インジェクションとは、ユーザー入力を悪用して不正な SQL 文を実行させる攻撃です。Laravel の Eloquent やクエリビルダを使えば、値が自動的に安全化されるので安心です。

### 入力値バリデーション

- コントローラや FormRequest で、ユーザーから受け取る値に対してバリデーション（検証）が徹底されています。
- 例：

```php
// app/Http/Requests/EmployeeRequest.php
public function rules()
{
    return [
        'name' => 'required|string|max:255',
        'email' => 'required|email',
        // ...他のバリデーション
    ];
}
```

#### 【初学者向け解説】

バリデーションとは、「入力値が正しいかどうか」を事前にチェックする仕組みです。これにより、不正なデータや危険な値がシステムに入るのを防げます。

### XSS 対策（バックエンド）

- 本アプリのバックエンドは API 専用で、サーバーサイドで HTML を生成・出力（Blade テンプレート等）は行っていません。
- そのため、XSS 対策としては「API で返す値をフロントエンド側でサニタイズする」ことが重要です。

#### 【補足：Blade について】

Laravel には Blade というテンプレートエンジンがありますが、このアプリでは使用していません。もし今後サーバーサイドで HTML を生成する場合は、`{{ $var }}` のような自動エスケープ機能を活用しましょう。

---

## 追加の推奨事項

- 入力値の長さや形式のチェックを徹底しましょう。
- 不要な HTML タグやスクリプトを許可しない設計にしましょう。
- エラーメッセージや API レスポンスに機密情報を含めないよう注意しましょう。

---

## 参考リンク

- [DOMPurify 公式](https://github.com/cure53/DOMPurify)
- [Laravel バリデーション公式](https://laravel.com/docs/validation)

---

このアプリは現状、基本的なセキュリティ対策（XSS・SQL インジェクション対策・バリデーション）が実装されています。今後も新しい機能を追加する際は、この方針を守ることで安全なアプリを維持できます。
